<% include ../partials/header %>


<div class="row">
    <div class="narrow-form">
        <form action="/polls/<%= poll._id %>" method="POST">
            <div class="form-group">
                <h3><%= poll.name %></h3>
            </div>
            <div class="form-group">
                <input type="radio" name="option" id="optionA" value="optionA">
                <label for="optionA"><%= poll.optionA %></label>
            </div>
            <div class="form-group">
                <input type="radio" name="option" id="optionB" value="optionB">
                <label for="optionB"><%= poll.optionB %></label>
            </div>
            <div class="form-group">
                <button class="btn btn-sm btn-success">Vote!</button>
            </div>
        </form>
        <p>
            <em>Submitted By: <%= poll.author.username %></em>
        </p>
        <% if(currentUser && (poll.author.id.equals(currentUser._id) || currentUser.isAdmin)) { %>
            <a class="btn btn-warning" href="/polls/<%= poll._id %>/edit">Edit</a>
            <form id="delete-poll" action="/polls/<%= poll._id %>?_method=DELETE" method="POST">
                <button class="btn btn-danger">Delete</button>
            </form>
        <% } %>
        <div>
            <h4>Current results:</h4>
            <p><em><%= poll.optionA %></em>: <strong><%= poll.votes.optionA %></strong></p>
            <p><em><%= poll.optionB %></em>: <strong><%= poll.votes.optionB %></strong></p>
        </div>
    </div>
</div>

<% include ../partials/footer %>